# -*- coding: utf-8 -*-
from .._base import AsyncBase
from ..generated import {{ plugin_name.lower() }}_pb2, {{ plugin_name.lower() }}_pb2_grpc


{%- for enum in enums %}


{{ enum }}
{%- endfor %}


{%- for struct in structs %}


{{ struct }}
{%- endfor %}


class {{ plugin_name }}(AsyncBase):
    """ Generated by dcsdkgen - DronecodeSDK {{ plugin_name }} API """

    # Plugin name
    name = "{{ plugin_name }}"

    def _setub_stub(self, channel):
        """ Setups the api stub """
        self._stub = {{ plugin_name }}

    def _response_success(self, response):
        """ Checks if the request was successfull """
        return (response.action_result.result ==
                {{ plugin_name.lower() }}_pb2.ActionResult.SUCCESS)

    {%- for method in methods -%}
    {{ '\n' + indent(method, 1) }}

    {%- endfor %}
