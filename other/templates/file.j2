# -*- coding: utf-8 -*-
from .._base import AsyncBase
from ..generated import {{ plugin_name.lower_snake_case }}_pb2, {{ plugin_name.lower_snake_case }}_pb2_grpc


{%- for enum in enums %}


{{ enum }}
{%- endfor %}


{%- for struct in structs %}


{{ struct }}
{%- endfor %}


class {{ plugin_name.upper_camel_case }}(AsyncBase):
    """ Generated by dcsdkgen - DronecodeSDK {{ plugin_name.upper_camel_case }} API """

    # Plugin name
    name = "{{ plugin_name.upper_camel_case }}"

    def _setup_stub(self, channel):
        """ Setups the api stub """
        self._stub = {{ plugin_name.lower_snake_case }}_pb2_grpc.{{ plugin_name.upper_camel_case }}ServiceStub(channel)

    def _response_success(self, response):
        """ Checks if the request was successfull """
        return (response.{{ plugin_name.lower_snake_case }}_result.result ==
                {{ plugin_name.lower_snake_case }}_pb2.{{ plugin_name.upper_camel_case }}Result.SUCCESS)

    {%- for method in methods -%}
    {{ '\n' + indent(method, 1) }}

    {%- endfor %}
